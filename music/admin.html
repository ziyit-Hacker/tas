<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <title>音乐管理系统 - 管理员后台</title>
    <link rel="icon" href="../assets/ziyit.png" type="image/x-icon">
    <script src="../assets/f12check.js"></script>
    <script src="../assets/blacklist.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./admin.css">
</head>

<body>
    <div class="admin-container">
        <!-- 头部导航 -->
        <header class="admin-header">
            <div class="header-top">
                <h1 class="admin-title">音乐管理系统</h1>
                <div class="user-info">
                    <div class="user-avatar">AD</div>
                    <div>
                        <div class="user-name">管理员</div>
                        <div class="user-role" id="user-role">系统管理员</div>
                    </div>
                </div>
            </div>
            <div class="header-stats">
                <div class="stat-card">
                    <div class="stat-number" id="total-songs">0</div>
                    <div class="stat-label">总歌曲数</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="playing-song">-</div>
                    <div class="stat-label">当前播放</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="online-users">1</div>
                    <div class="stat-label">在线用户</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="system-status">正常</div>
                    <div class="stat-label">系统状态</div>
                </div>
            </div>
        </header>

        <!-- 主要内容区域 -->
        <div class="admin-content">
            <!-- 侧边栏 -->
            <aside class="sidebar">
                <ul class="sidebar-menu">
                    <li class="menu-item active" data-section="music-management">
                        <span>🎵</span> 音乐管理
                    </li>
                    <li class="menu-item" data-section="user-management">
                        <span>👥</span> 用户管理
                    </li>
                    <li class="menu-item" data-section="coin-management">
                        <span>💰</span>坤币管理
                    </li>
                    <li class="menu-item" onclick="window.location.href = '../developers/'">
                        <span>📋</span> 日志查看
                    </li>
                    <li class="menu-item" onclick="window.location.href = 'javascript:history.back()'">
                        <span>🔙</span> 返回
                    </li>
                </ul>
            </aside>

            <!-- 主内容区 -->
            <main class="main-content">
                <!-- 音乐管理 -->
                <section id="music-management" class="content-section active">
                    <!-- 音乐播放器 -->
                    <section class="music-player-admin">
                        <div class="player-header">
                            <h2 class="player-title">音乐播放控制</h2>
                            <div class="player-status" id="player-status">暂停中</div>
                        </div>

                        <div class="player-info">
                            <div class="current-song" id="current-song">请选择一首歌曲</div>
                        </div>

                        <div class="progress-container">
                            <span class="time-display" id="current-time">00:00</span>
                            <div class="progress-bar">
                                <div class="progress" id="progress"></div>
                            </div>
                            <span class="time-display" id="total-time">00:00</span>
                        </div>

                        <div class="player-controls">
                            <button class="control-btn" id="prev-btn">◀◀</button>
                            <button class="control-btn" id="play-btn">▶</button>
                            <button class="control-btn" id="next-btn">▶▶</button>
                        </div>

                        <audio id="audio-player" preload="metadata"></audio>
                    </section>

                    <!-- 歌词显示 -->
                    <section class="lyrics-admin">
                        <div class="lyrics-header">
                            <span>歌词内容</span>
                            <span class="lyrics-info" id="lyrics-info">未加载</span>
                            <div class="lrc-controls">
                                <button class="lrc-btn" id="edit-lyrics-btn">编辑歌词</button>
                                <button class="lrc-btn" id="save-lyrics-btn" style="display: none;">保存歌词</button>
                                <button class="lrc-btn" id="start-lrc-conversion">开始LRC转换</button>
                                <button class="lrc-btn" id="download-lrc" disabled>下载LRC文件</button>
                                <span class="lrc-status" id="lrc-status">准备就绪</span>
                            </div>
                        </div>
                        <div class="lyrics-content" id="lyrics-content">
                            请选择歌曲以显示歌词内容...
                        </div>
                        <div class="lyrics-controls" id="lyrics-controls" style="display: none;">
                            <button class="cancel-btn" id="cancel-edit-btn">取消编辑</button>
                            <button class="save-btn" id="confirm-save-btn">确认保存</button>
                        </div>
                        <div class="lrc-conversion-panel" id="lrc-conversion-panel" style="display: none;">
                            <div class="lrc-panel-header">
                                <h3>LRC歌词转换</h3>
                                <div class="lrc-progress">
                                    <span>当前行: <span id="current-line-index">0</span>/<span
                                            id="total-lines">0</span></span>
                                    <span>当前时间: <span id="current-time-display">00:00.00</span></span>
                                </div>
                            </div>
                            <div class="lrc-control-buttons">
                                <button class="lrc-action-btn" id="next-line-btn">下一行歌词</button>
                                <button class="lrc-action-btn" id="reset-lrc-btn">重置转换</button>
                            </div>
                            <div class="lrc-preview">
                                <h4>LRC预览:</h4>
                                <textarea id="lrc-preview-content" readonly></textarea>
                            </div>
                        </div>
                    </section>

                    <!-- 音乐列表 -->
                    <section class="music-list-admin">
                        <div class="list-header">
                            <h2>音乐库管理</h2>
                            <div class="search-container">
                                <input type="text" class="search-input" id="search-input" placeholder="搜索歌曲...">
                                <button class="search-btn" id="search-button">
                                    <svg width="16" height="16" viewBox="0 0 16 16">
                                        <path
                                            d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                        <div class="music-items" id="music-list">
                            <!-- 音乐列表将通过JavaScript动态生成 -->
                        </div>
                    </section>
                </section>

                <!-- 用户管理 -->
                <section id="user-management" class="content-section">
                    <div class="section-header">
                        <h2>用户管理</h2>
                        <button class="user-btn success" id="add-user-btn">添加用户</button>
                    </div>

                    <div class="user-controls">
                        <input type="text" class="user-search" id="user-search" placeholder="搜索用户名...">
                        <button class="user-btn" id="refresh-users">刷新列表</button>
                        <button class="user-btn danger" id="export-users">导出数据</button>
                    </div>

                    <div class="user-stats">
                        <div class="user-stat-card">
                            <div class="user-stat-number" id="total-users">0</div>
                            <div class="user-stat-label">总用户数</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-number" id="vip-users">0</div>
                            <div class="user-stat-label">VIP用户</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-number" id="normal-users">0</div>
                            <div class="user-stat-label">普通用户</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-number" id="online-user-count">1</div>
                            <div class="user-stat-label">在线用户</div>
                        </div>
                        <div class="user-stat-card">
                            <div class="user-stat-number" id="blacklist-users">0</div>
                            <div class="user-stat-label">黑名单用户</div>
                        </div>
                    </div>

                    <div class="user-list" id="user-list">
                        <!-- 用户列表将通过JavaScript动态生成 -->
                    </div>
                </section>

                <!-- 坤币管理 -->
                <section id="coin-management" class="content-section">
                    <div class="section-header">
                        <h2>坤币管理</h2>
                    </div>
                    <div class="section-header">
                        <h2>数据统计</h2>
                    </div>
                    <div class="coin-verifier">
                        <div class="verifier-header">
                            <h3>坤币验钞机</h3>
                            <div class="verifier-stats">
                                <span class="stat-item">总坤币数: <span id="total-coins">0</span></span>
                                <span class="stat-item">正常坤币: <span id="normal-coins">0</span></span>
                                <span class="stat-item">异常坤币: <span id="abnormal-coins">0</span></span>
                            </div>
                        </div>

                        <div class="verifier-input">
                            <div class="form-group">
                                <label class="form-label">坤币编号</label>
                                <input type="text" class="form-input" id="coin-id-input" placeholder="请输入坤币编号"
                                    maxlength="20" required>
                            </div>
                            <div class="form-group">
                                <label class="form-label">坤币面额</label>
                                <select class="form-select" id="coin-amount-input">
                                    <option value="">请选择面额</option>
                                    <option value="0.1">1燚</option>
                                    <option value="1">1坤</option>
                                    <option value="2">2坤</option>
                                    <option value="10">10坤</option>
                                    <option value="50">50坤</option>
                                    <option value="100">100坤</option>
                                </select>
                                <input type="text" class="form-input" id="coin-custom-amount" placeholder="输入自定义面额"
                                    style="display: none; margin-top: 5px;" required>
                            </div>
                            <div class="input-group">
                                <button type="button" class="user-btn primary" id="verify-coin-btn">验证坤币</button>
                                <button type="button" class="user-btn secondary" id="clear-input-btn">清空输入</button>
                            </div>
                        </div>

                        <div class="verifier-result" id="verifier-result" style="display: none;">
                            <div class="result-header">
                                <h4>验证结果</h4>
                                <span class="result-status" id="result-status"></span>
                            </div>
                            <div class="result-details">
                                <div class="detail-item">
                                    <span class="detail-label">坤币编号:</span>
                                    <span class="detail-value" id="result-id"></span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">坤币面额:</span>
                                    <span class="detail-value" id="result-amount"></span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">坤币状态:</span>
                                    <span class="detail-value" id="result-status-detail"></span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">验证时间:</span>
                                    <span class="detail-value" id="result-time"></span>
                                </div>
                                <div class="detail-item">
                                    <span class="detail-label">验证结果:</span>
                                    <span class="detail-value" id="result-verification"></span>
                                </div>
                            </div>
                        </div>

                        <div class="coin-list">
                            <div class="list-header">
                                <h4>坤币列表</h4>
                                <button type="button" class="user-btn secondary" id="refresh-coins-btn">刷新列表</button>
                            </div>
                            <div class="coin-table-container">
                                <table class="coin-table" id="coin-table">
                                    <thead>
                                        <tr>
                                            <th>坤币编号</th>
                                            <th>坤币面额</th>
                                            <th>坤币状态</th>
                                            <th>操作</th>
                                        </tr>
                                    </thead>
                                    <tbody id="coin-table-body">
                                        <!-- 坤币列表将通过JavaScript动态生成 -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </section>

                <section id="system-settings" class="content-section">
                    <div class="section-header">
                        <h2>系统设置</h2>
                    </div>
                    <p>系统设置功能开发中...</p>
                </section>

                <section id="log-viewer" class="content-section">
                    <div class="section-header">
                        <h2>日志查看</h2>
                    </div>
                    <p>日志查看功能开发中...</p>
                </section>

                <section id="permission-management" class="content-section">
                    <div class="section-header">
                        <h2>权限管理</h2>
                    </div>
                    <p>权限管理功能开发中...</p>
                </section>
            </main>
        </div>

        <!-- 系统信息 -->
        <footer class="system-info">
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-label">服务器时间:</span>
                    <span class="info-value" id="server-time">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">内存使用:</span>
                    <span class="info-value" id="memory-usage">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">CPU负载:</span>
                    <span class="info-value" id="cpu-load">-</span>
                </div>
                <div class="info-item">
                    <span class="info-label">最后更新:</span>
                    <span class="info-value" id="last-update">-</span>
                </div>
            </div>
        </footer>
    </div>

    <!-- 用户编辑模态框 -->
    <div class="modal" id="user-modal">
        <div class="modal-content">
            <div class="modal-header" id="modal-title">编辑用户</div>
            <form id="user-form">
                <div class="form-group">
                    <label class="form-label">用户名</label>
                    <input type="text" class="form-input" id="edit-username" required>
                </div>
                <div class="form-group">
                    <label class="form-label">密码</label>
                    <input type="password" class="form-input" id="edit-password" placeholder="留空则不修改">
                </div>
                <div class="form-group">
                    <label class="form-label">用户类型</label>
                    <select class="form-select" id="edit-usertype" required>
                        <option value="UR">普通用户</option>
                        <option value="ZC">VIP用户</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">ZTG用户</label>
                    <select class="form-select" id="edit-ztg" required>
                        <option value="False">否</option>
                        <option value="True">是</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="user-btn danger" id="cancel-edit">取消</button>
                    <button type="submit" class="user-btn success">保存</button>
                </div>
            </form>
        </div>
    </div>

    <script src="./admin.js"></script>
</body>

</html>
